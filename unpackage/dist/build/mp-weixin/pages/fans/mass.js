(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/fans/mass"],{"235d":function(t,a,n){"use strict";n.r(a);var e=n("c525"),s=n("9d9e");for(var i in s)"default"!==i&&function(t){n.d(a,t,function(){return s[t]})}(i);n("baea");var o=n("2877"),r=Object(o["a"])(s["default"],e["a"],e["b"],!1,null,"b04f690e",null);a["default"]=r.exports},"9d9e":function(t,a,n){"use strict";n.r(a);var e=n("b4e6"),s=n.n(e);for(var i in e)"default"!==i&&function(t){n.d(a,t,function(){return e[t]})}(i);a["default"]=s.a},b0a6:function(t,a,n){},b4e6:function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e=function(){return n.e("components/modalComponent").then(n.bind(null,"5390"))},s=function(){return n.e("components/btnComponent").then(n.bind(null,"b111"))},i={components:{modalComponent:e,btnComponent:s},data:function(){return{$app:this.$app,list:[],remainTime:0,modal:"",blockUserCount:6,fanclub:null,totalCount:0,noticeId:0,status:0}},onShareAppMessage:function(t){var a=t.target&&t.target.dataset.share;return this.$app.commonShareAppMessage(a)},onLoad:function(t){this.referrer=this.$app.getData("query").referrer,this.loadData()},methods:{ad:function(){var t=this;this.$app.openVideoAd(function(){t.mass(1)})},mass:function(t){var a=this;this.$app.request("fans/joinMass",{type:t,fid:this.fanclub.id},function(t){a.modal="",a.loadData(),a.$app.toast("金豆+"+t.data)},"POST",!0)},getUserInfo:function(t){var a=this,n=t.detail.userInfo;n&&(this.$app.getData("userInfo").nickname||this.$app.request(this.$app.API.USER_SAVEINFO,{iv:t.detail.iv,encryptedData:t.detail.encryptedData},function(t){a.$app.request(a.$app.API.USER_INFO,{user_id:a.$app.getData("userInfo").id},function(t){a.$app.setData("userInfo",t.data)})},"POST",!0),3==this.status?this.$app.toast("你已加入别的粉丝团"):2==this.status?this.$app.modal("是否加入 ".concat(this.fanclub.clubname," ?"),function(){a.$app.request("fans/join",{id:a.fanclub.id},function(t){a.$app.toast("加入成功！","success"),a.loadData(),a.modal="mass"},"POST",!0)},"加入"):1==this.status?this.$app.modal("是否加入".concat(this.fanclub.star.name,"的圈子\n并加入粉丝圈").concat(this.fanclub.clubname),function(){a.$app.request(a.$app.API.STAR_FOLLOW,{starid:a.fanclub.star_id,rer_user_id:a.$app.getData("query").referrer},function(t){a.$app.request(a.$app.API.USER_STAR,{},function(t){a.$app.setData("userStar",t.data),a.$app.setData("noob",!0),a.$app.request("fans/join",{id:a.fanclub.id},function(t){a.$app.toast("加入成功！","success"),a.loadData(),a.modal="mass"})})})},"加入"):this.modal="mass")},loadData:function(){var t=this;this.$app.request("fans/mass",{referrer:this.referrer},function(a){t.totalCount=a.data.totalCount,t.list=a.data.list,t.fanclub=a.data.fanclub,t.noticeId=a.data.noticeId,t.status=a.data.userStatus,t.list&&t.list.length>3&&(t.blockUserCount=6-t.list.length%3);var n=a.data.remainTime;if(n){var e=t.$app.timeGethms(n);t.remainTime=e.str,clearInterval(t.timeId),t.timeId=setInterval(function(){--n<=0&&(clearInterval(t.timeId),t.loadData()),e=t.$app.timeGethms(n),t.remainTime=e.str},1e3)}})}}};a.default=i},baea:function(t,a,n){"use strict";var e=n("b0a6"),s=n.n(e);s.a},c525:function(t,a,n){"use strict";var e=function(){var t=this,a=t.$createElement;t._self._c;t._isMounted||(t.e0=function(a){return t.$app.goPage("/pages/notice/notice?id="+this.noticeId)},t.e1=function(a){t.modal=""})},s=[];n.d(a,"a",function(){return e}),n.d(a,"b",function(){return s})}},[["b619","common/runtime","common/vendor"]]]);