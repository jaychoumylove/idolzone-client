(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/charge/charge"],{"0236":function(t,n,e){},"72dc":function(t,n,e){"use strict";(function(t){var a;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){return e.e("components/btnComponent").then(e.bind(null,"b111"))},i=function(){return e.e("components/badgeComponent").then(e.bind(null,"65dc"))},o=function(){return e.e("components/modalComponent").then(e.bind(null,"5390"))},s={components:{btnComponent:r,badgeComponent:i,modalComponent:o},data:function(){return{$app:this.$app,modal:"",requestCount:1,tabActive:0,userInfo:{avatarurl:this.$app.getData("userInfo")["avatarurl"]||this.$app.AVATAR,nickname:this.$app.getData("userInfo")["nickname"]||this.$app.NICKNAME,id:this.$app.getData("userInfo")["id"]||null},userCurrency:this.$app.getData("userCurrency")||{coin:0,stone:0,trumpet:0},rechargeList:this.$app.getData("goodsList")||[],discount:{},discount_option:[],discount_option_index:0,currentUser:{},currentUserid:""}},onLoad:function(){var t=this;this.getGoodsList(0);var n=setInterval(function(){t.$app.getData("userInfo").nickname&&(clearInterval(n),t.userInfo=t.$app.getData("userInfo"),t.userCurrency=t.$app.getData("userCurrency"))},300)},onUnload:function(){clearInterval(a)},methods:{kickBack:function(){},confirm:function(){this.currentUser.nickname?(this.userInfo=this.currentUser,this.modal=""):this.$app.toast("请先查找用户")},searchUser:function(){var t=this;if(this.currentUserid){var n=Math.round(this.currentUserid/1234);this.$app.request("user/info",{user_id:n},function(n){n.data.nickname?t.currentUser=n.data:t.$app.toast("未找到用户")},"POST",!0)}},payment:function(n){var e=this;"MP-QQ"!=this.$app.getData("platform")?this.$app.request(this.$app.API.PAY_ORDER,{goods_id:n,userprop_id:this.discount.userprop_id,user_id:this.userInfo.id},function(n){t.requestPayment({provider:"wxpay",timeStamp:n.data.timeStamp,nonceStr:n.data.nonceStr,package:n.data.package,signType:n.data.signType,paySign:n.data.paySign,success:function(t){e.$app.toast("支付成功","success"),e.$app.request(e.$app.API.USER_CURRENCY,{},function(t){e.$app.setData("userCurrency",t.data),e.userCurrency=e.$app.getData("userCurrency"),e.modal=""}),e.getGoodsList(0)},fail:function(t){e.$app.toast("支付失败")}})},"POST",!0):this.$app.getData("config").version!=this.$app.VERSION?this.$app.preImg(this.$app.getData("config").qq_tips_img):this.$app.modal("抱歉，QQ支付暂无法使用")},getGoodsList:function(t){var n=this;this.$app.request(this.$app.API.PAY_GOODS,{userprop_id:t},function(t){n.rechargeList=t.data.list,n.discount=t.data.discount,n.discount_option=t.data.discount_option,n.$app.setData("goodsList",n.rechargeList)})},bindPickerChange:function(t){this.discount_option_index=t.target.value,this.getGoodsList(this.discount_option[this.discount_option_index].id)}}};n.default=s}).call(this,e("543d")["default"])},7476:function(t,n,e){"use strict";e.r(n);var a=e("72dc"),r=e.n(a);for(var i in a)"default"!==i&&function(t){e.d(n,t,function(){return a[t]})}(i);n["default"]=r.a},"8cdf":function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=(t._self._c,t.$app.getData("sysInfo").system.indexOf("iOS")),a=t.$app.getData("config"),r=t.__map(t.rechargeList,function(n,e){var a=t.$app.formatNumber(n.flower,0);return{$orig:t.__get_orig(n),g2:a}}),i=t.__map(t.rechargeList,function(n,e){var a=t.$app.formatNumber(n.flower,0);return{$orig:t.__get_orig(n),g3:a}}),o=t.__map(t.rechargeList,function(n,e){var a=t.$app.formatNumber(n.flower,0);return{$orig:t.__get_orig(n),g4:a}}),s=t.$app.getData("config"),u=t.$app.getData("config"),p=t.__map(t.rechargeList,function(n,e){var a=t.$app.formatNumber(n.flower,1);return{$orig:t.__get_orig(n),g7:a}});t._isMounted||(t.e0=function(n){t.modal="proxyRecharge"},t.e1=function(n){t.tabActive=0},t.e2=function(n){t.tabActive=1},t.e3=function(n){t.modal=""},t.e4=function(n){t.currentUserid=n.detail.value}),t.$mp.data=Object.assign({},{$root:{g0:e,g1:a,l0:r,l1:i,l2:o,g5:s,g6:u,l3:p}})},r=[];e.d(n,"a",function(){return a}),e.d(n,"b",function(){return r})},e740:function(t,n,e){"use strict";e.r(n);var a=e("8cdf"),r=e("7476");for(var i in r)"default"!==i&&function(t){e.d(n,t,function(){return r[t]})}(i);e("ef71");var o=e("2877"),s=Object(o["a"])(r["default"],a["a"],a["b"],!1,null,"222610b8",null);n["default"]=s.exports},ef71:function(t,n,e){"use strict";var a=e("0236"),r=e.n(a);r.a}},[["ed45","common/runtime","common/vendor"]]]);